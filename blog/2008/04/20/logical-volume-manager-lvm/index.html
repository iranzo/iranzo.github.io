<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Logical volume manager (LVM) | Pablo Iranzo Gómez blog</title>
<meta name=keywords content="Linux,LVM,FOSS,logical volumes"><meta name=description content="Introduction
LVM are the initials for Logical Volume Manager, a powerful tool present in actual Linux systems inspired in the implementation available in other systems like AIX and HP-UX.
LVM introduces a separation between system structure and elements like disks, partitions, filesystems to which we are used to.
LVM has three levels:

Physical volumes
Volume Groups
Logical volumes

One of the benefits of LVM over traditional systems is that LVM introduces an abstraction layer which improves the limitation of a disk, allowing us to have a filesystem to span over several disks, resizing thus making a more efficient usage of storage."><meta name=author content="Pablo Iranzo Gómez"><link rel=canonical href=https://iranzo.io/blog/2008/04/20/logical-volume-manager-lvm/><meta name=google-site-verification content="Bk4Z5ucHLyPXqlZlj5LzANpYBBSvxqBW4E8i-Kwf-bQ"><meta name=yandex-verification content="993ede96cdfbee95"><link crossorigin=anonymous href=../../../../../assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://iranzo.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://iranzo.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://iranzo.io/favicon-32x32.png><link rel=apple-touch-icon href=https://iranzo.io/apple-touch-icon.png><link rel=mask-icon href=https://iranzo.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://iranzo.io/blog/2008/04/20/logical-volume-manager-lvm/><link rel=alternate hreflang=es href=https://iranzo.io/es/blog/2007/03/09/Gestor-de-Volumenes-Logicos-LVM/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZL9P943TP1"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-ZL9P943TP1")}</script><meta property="og:url" content="https://iranzo.io/blog/2008/04/20/logical-volume-manager-lvm/"><meta property="og:site_name" content="Pablo Iranzo Gómez blog"><meta property="og:title" content="Logical volume manager (LVM)"><meta property="og:description" content="Introduction LVM are the initials for Logical Volume Manager, a powerful tool present in actual Linux systems inspired in the implementation available in other systems like AIX and HP-UX.
LVM introduces a separation between system structure and elements like disks, partitions, filesystems to which we are used to.
LVM has three levels:
Physical volumes Volume Groups Logical volumes One of the benefits of LVM over traditional systems is that LVM introduces an abstraction layer which improves the limitation of a disk, allowing us to have a filesystem to span over several disks, resizing thus making a more efficient usage of storage."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2008-04-20T23:03:52+00:00"><meta property="article:modified_time" content="2025-02-12T09:35:31+00:00"><meta property="article:tag" content="Linux"><meta property="article:tag" content="LVM"><meta property="article:tag" content="FOSS"><meta property="article:tag" content="Logical Volumes"><meta property="og:image" content="https://iranzo.io/blog/2008/04/20/logical-volume-manager-lvm/lvm8.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://iranzo.io/blog/2008/04/20/logical-volume-manager-lvm/lvm8.jpg"><meta name=twitter:title content="Logical volume manager (LVM)"><meta name=twitter:description content="Introduction
LVM are the initials for Logical Volume Manager, a powerful tool present in actual Linux systems inspired in the implementation available in other systems like AIX and HP-UX.
LVM introduces a separation between system structure and elements like disks, partitions, filesystems to which we are used to.
LVM has three levels:

Physical volumes
Volume Groups
Logical volumes

One of the benefits of LVM over traditional systems is that LVM introduces an abstraction layer which improves the limitation of a disk, allowing us to have a filesystem to span over several disks, resizing thus making a more efficient usage of storage."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"https://iranzo.io/blog/"},{"@type":"ListItem","position":2,"name":"Logical volume manager (LVM)","item":"https://iranzo.io/blog/2008/04/20/logical-volume-manager-lvm/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Logical volume manager (LVM)","name":"Logical volume manager (LVM)","description":"Introduction LVM are the initials for Logical Volume Manager, a powerful tool present in actual Linux systems inspired in the implementation available in other systems like AIX and HP-UX.\nLVM introduces a separation between system structure and elements like disks, partitions, filesystems to which we are used to.\nLVM has three levels:\nPhysical volumes Volume Groups Logical volumes One of the benefits of LVM over traditional systems is that LVM introduces an abstraction layer which improves the limitation of a disk, allowing us to have a filesystem to span over several disks, resizing thus making a more efficient usage of storage.\n","keywords":["Linux","LVM","FOSS","logical volumes"],"articleBody":"Introduction LVM are the initials for Logical Volume Manager, a powerful tool present in actual Linux systems inspired in the implementation available in other systems like AIX and HP-UX.\nLVM introduces a separation between system structure and elements like disks, partitions, filesystems to which we are used to.\nLVM has three levels:\nPhysical volumes Volume Groups Logical volumes One of the benefits of LVM over traditional systems is that LVM introduces an abstraction layer which improves the limitation of a disk, allowing us to have a filesystem to span over several disks, resizing thus making a more efficient usage of storage.\nVolumes make use of PE1, which are the units (there’s a relationship set during creation) used for measuring size and future size changes of the volumes.\nLVM structure is as shown:\nPhysical volumes (PV) A physical volume is a disk or a slice of it that we will designate for inclusion in a volume group.\nPhysical volumes can be places in a partition (for example if they have to coexist with another operating systems), or well span over the whole disk, even over md devices2.\nVolume groups (VG) Volume groups are defined grouping one or more physical volumes and are, as if they where physical disks which take their size from the different physical volumes associated to them.\nLogical volumes (LV) Logical volumes are created inside a volume group and are the equivalent to partitions in other systems, is the part of LVM that we format with a filesystem and we join afterwards to our system for being used for storage.\nCommands All commands related with LVM use a similar naming, which starts with the element they affect to:\npv(change, display, remove, create, move, resize, scan) for physical volumes. vg(convert, extend, reduce, scan, create, import, remove, split, change, display, merge, rename, export) for volume groups lv(change, display, convert, extend, remove, rename, scan, create, reduce, resize) for logical volumes System preparation for LVM Hard drive partitioning Before using LVM we need to designate some devices (full drives or partitions (type 8e on fdisk))\nAfter doing so, we need to execute partprobe to refresh the partition layouts in running kernel with the defined schema.\nIn our example, we’ll have two hard drives: hda and sda.\nIn hda we have one partition, hda1 in which we store /boot (partition for kernel and initrd, as they cannot be on a LVM volume), and the rest is in a partition hda2 which grows until the full size of the drive.\nIn sda we have the whole disk available for being used as LVM, so we will define a partition sda1 for this use.\nCreation of physical volumes (PV) Physical volumes are the places in which we put the structure for volume groups, it’s creation is as easy as running:\n#!bash pvcreate /dev/hda2 pvcreate /dev/sda1 If we execute pvscan, we can check the listing of physical volumes defined on the system, as well as the kind of metadata (lvm or lvm2) and it’s size, and a briefing on total, used and available.\nFor having a detailed state, we can execute pvdisplay, which will show more information like size, PE's available, etc.\nCreation of volume groups (VG) Volume groups are like drawers, which placed over physical volumes, that define the grouping for logical volumes, making more clear the structure.\nFor creating the volume group we will execute:\n#!bash vgcreate Prueba /dev/sda1 This command will create a volume group named Prueba over the physical volume at /dev/sda1\nFor checking that the action went ok, was we can execute vgscan for getting a listing of defined volume groups.\nCreation of Logical volumes (LV) Logical volumes are the equivalent to partitions, is the place over which we will put a filesystem and thus, the data we want to store.\nLogical volumes are defined inside a volume group in the following way:\n#!bash lvcreate Prueba -n Inicial -L 2G If we execute lvscan, we will have a listing of all the defined volume groups and it’s size and between them, Inicial, inside of Prueba and with a 2Gb size\nCreation of a filesystem Before using the logical volume we’ll need to prepare it for data, and creating a filesystem, this time, the command is identical to the one we use over a physical disk, but specifying the logical volume, for example:\n#!bash mkfs.ext3 /dev/Prueba/Inicial It’s advisable to make use of a filesystem we can resize, as, one the improvements of LVM is the ability to resize logical units and, requires, as consequence that the filesystem works as a “container” able to grow or shrink the same way.\nNow, we can mount the filesystem:\n#!bash mount /dev/Prueba/Inicial /mnt Resizing an LVM “drive” EXT3, allows resizing of volumes, so they can grow while being used, but for reducing size we need to stop its usage, and even in that case, it allows the interesting opportunity to create small filesystems, fitted for our initial usage and then keep them growing based on our needs without stop running.\nAs an example, we’re going to extend our Inicial filesystem, increasing it in 250Mb, we’ll execute:\n#!bash pvscan #(where we will be told about physical volumes and free space) # In case of need, we can extend our volume group with: pvcreate /dev/disconuevo vgextend Prueba /dev/disconuevo # From now on, the vg will have the space ready for being used by lv and we will make it grow doing: lvextend -L +250M /dev/Prueba/Inicial ext2online /dev/mapper/Prueba-Inicial After it finishes, the filesystem at /mnt will have an extra 250Mb available.\nWe can make the filesystem grow to a total size, for example, make it grow until 4Gb, to do so, we will do:\n#!bash lvextend -L 4G /dev/Prueba/Inicial ext2online /dev/mapper/Prueba-Inicial Starting in Fedora Core 6 (FC6), the utility ext2online doesn’t exist, as it has been integrated in resize2fs, so we will execute instead: resize2fs -p /dev/Prueba-Inicial [final size].\nATTENTION: This is a dangerous step, we can lose data\nIf we want to reduce the size of a logical volume, first, we’ll need to know how much space is used by the filesystem and then, umount it:\n#!bash umount /dev/mapper/Prueba-Inicial #Next step would be reduce the filesystem: resize2fs /dev/mapper/Prueba-Inicial [new size] I’m recommending reduce the filesystem under the final size we want to achieve, so we have a security margin. This size must ALWAYS be higher that the usage3 of the volume.\nWhen the process has ended, we can reduce the volume running:\nlvextend -L -2G /dev/mapper/Prueba-Inicial\nAnd now we will make the filesystem grow to regain the “security margin” we left with: resize2fs /dev/mapper/Prueba-Inicial.\nGraphical tool Red Hat or Fedora have a graphical tool system-config-lvm which allows to manage logical volumes in our system in the following way.\nIn the next screenshot we can see the physical volumes no assigned to a volume group, and with the options provided by the tool, we can add to an existing volume group or well, create a new volume group:\nHere we can create a new logical volume inside the volume group, we can specify the volume name, the kind of volume as well as size and filesystem:\nHere we can see the volume group “Test” and the logical and physical view created (as we see, Test is made of four physical volumes: sdb1,sdb2,sdb3,sdb4)\nWhen we select the free space of the logical volume, the following is shown: number of extents, physical location for each physical volume.\nPhysical Extents ↩︎\nMultiple Devices: is a software technology that allows creation of several disk grouping levels: linear, raid0, raid1, raid5. Devices will identify themselves to the system as /dev/md*0,1,2,3,etc*, and it’s status (defined md's, sync status, etc) in the file /proc/mdstat ↩︎\nThe one that we wrote down in the first step, before it was unmounted. Enjoy! (and if you do, you can Buy Me a Coffee ) ↩︎\n","wordCount":"1304","inLanguage":"en","image":"https://iranzo.io/blog/2008/04/20/logical-volume-manager-lvm/lvm8.jpg","datePublished":"2008-04-20T23:03:52Z","dateModified":"2025-02-12T09:35:31.457Z","author":{"@type":"Person","name":"Pablo Iranzo Gómez"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://iranzo.io/blog/2008/04/20/logical-volume-manager-lvm/"},"publisher":{"@type":"Organization","name":"Pablo Iranzo Gómez blog","logo":{"@type":"ImageObject","url":"https://iranzo.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://iranzo.io/ accesskey=h title="Home (Alt + H)"><img src=https://iranzo.io/apple-icon-152x152.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://iranzo.io/es/ title=Spanish aria-label=Spanish>Es</a></li></ul></div></div><ul id=menu><li><a href=https://iranzo.io/ title=🏠Home><span>🏠Home</span></a></li><li><a href=https://iranzo.io/about/ title=🗒️About><span>🗒️About</span></a></li><li><a href=https://iranzo.io/redken_bot/ title=🐘redken_bot><span>🐘redken_bot</span></a></li><li><a href=https://iranzo.io/projects/ title=📐Projects><span>📐Projects</span></a></li><li><a href=https://iranzo.io/archives/ title="🗄️ Archives"><span>🗄️ Archives</span></a></li><li><a href=https://iranzo.io/categories/ title=🗺️Categories><span>🗺️Categories</span></a></li><li><a href=https://iranzo.io/tags/ title=🏷️Tags><span>🏷️Tags</span></a></li><li><a href=https://iranzo.io/search title="🔎Search (Alt + /)" accesskey=/><span>🔎Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://iranzo.io/>Home</a>&nbsp;»&nbsp;<a href=https://iranzo.io/blog/>Blogs</a></div><h1 class="post-title entry-hint-parent">Logical volume manager (LVM)</h1><div class=post-meta><span title='2008-04-20 23:03:52 +0000 UTC'>April 20, 2008</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;Pablo Iranzo Gómez&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://iranzo.io/es/blog/2007/03/09/Gestor-de-Volumenes-Logicos-LVM/>Es</a></li></ul></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#introduction aria-label=Introduction>Introduction</a></li><li><a href=#physical-volumes-pv aria-label="Physical volumes (PV)">Physical volumes (PV)</a></li><li><a href=#volume-groups-vg aria-label="Volume groups (VG)">Volume groups (VG)</a></li><li><a href=#logical-volumes-lv aria-label="Logical volumes (LV)">Logical volumes (LV)</a></li><li><a href=#commands aria-label=Commands>Commands</a></li><li><a href=#system-preparation-for-lvm aria-label="System preparation for LVM">System preparation for LVM</a></li><li><a href=#hard-drive-partitioning aria-label="Hard drive partitioning">Hard drive partitioning</a></li><li><a href=#creation-of-physical-volumes-pv aria-label="Creation of physical volumes (PV)">Creation of physical volumes (PV)</a></li><li><a href=#creation-of-volume-groups-vg aria-label="Creation of volume groups (VG)">Creation of volume groups (VG)</a></li><li><a href=#creation-of-logical-volumes-lv aria-label="Creation of Logical volumes (LV)">Creation of Logical volumes (LV)</a></li><li><a href=#creation-of-a-filesystem aria-label="Creation of a filesystem">Creation of a filesystem</a></li><li><a href=#resizing-an-lvm-drive aria-label="Resizing an LVM &ldquo;drive&rdquo;">Resizing an LVM &ldquo;drive&rdquo;</a></li><li><a href=#graphical-tool aria-label="Graphical tool">Graphical tool</a></li></ul></div></details></div><div class=post-content><h3 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h3><p>LVM are the initials for Logical Volume Manager, a powerful tool present in actual Linux systems inspired in the implementation available in other systems like AIX and HP-UX.</p><p>LVM introduces a separation between system structure and elements like disks, partitions, filesystems to which we are used to.</p><p>LVM has three levels:</p><ul><li>Physical volumes</li><li>Volume Groups</li><li>Logical volumes</li></ul><p>One of the benefits of LVM over traditional systems is that LVM introduces an abstraction layer which improves the limitation of a disk, allowing us to have a filesystem to span over several disks, resizing thus making a more efficient usage of storage.</p><p>Volumes make use of <code>PE</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, which are the units (there&rsquo;s a relationship set during creation) used for measuring size and future size changes of the volumes.</p><p>LVM structure is as shown:</p><p><img alt="LVM schema" loading=lazy src=../../../../../blog/2008/04/20/logical-volume-manager-lvm/lvmschema.gif></p><h3 id=physical-volumes-pv>Physical volumes (<code>PV</code>)<a hidden class=anchor aria-hidden=true href=#physical-volumes-pv>#</a></h3><p>A physical volume is a disk or a slice of it that we will designate for inclusion in a volume group.</p><p>Physical volumes can be places in a partition (for example if they have to coexist with another operating systems), or well span over the whole disk, even over <code>md</code> devices<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</p><h3 id=volume-groups-vg>Volume groups (<code>VG</code>)<a hidden class=anchor aria-hidden=true href=#volume-groups-vg>#</a></h3><p>Volume groups are defined grouping one or more physical volumes and are, as if they where physical disks which take their size from the different physical volumes associated to them.</p><h3 id=logical-volumes-lv>Logical volumes (<code>LV</code>)<a hidden class=anchor aria-hidden=true href=#logical-volumes-lv>#</a></h3><p>Logical volumes are created inside a volume group and are the equivalent to partitions in other systems, is the part of LVM that we format with a filesystem and we join afterwards to our system for being used for storage.</p><h3 id=commands>Commands<a hidden class=anchor aria-hidden=true href=#commands>#</a></h3><p>All commands related with LVM use a similar naming, which starts with the element they affect to:</p><ul><li>pv(change, display, remove, create, move, resize, scan) for physical volumes.</li><li>vg(convert, extend, reduce, scan, create, import, remove, split, change, display, merge, rename, export) for volume groups</li><li>lv(change, display, convert, extend, remove, rename, scan, create, reduce, resize) for logical volumes</li></ul><h3 id=system-preparation-for-lvm>System preparation for LVM<a hidden class=anchor aria-hidden=true href=#system-preparation-for-lvm>#</a></h3><h3 id=hard-drive-partitioning>Hard drive partitioning<a hidden class=anchor aria-hidden=true href=#hard-drive-partitioning>#</a></h3><p>Before using LVM we need to designate some devices (full drives or partitions (type 8e on <code>fdisk</code>))</p><p>After doing so, we need to execute <code>partprobe</code> to refresh the partition layouts in running kernel with the defined schema.</p><p>In our example, we&rsquo;ll have two hard drives: <code>hda</code> and <code>sda</code>.</p><p>In <code>hda</code> we have one partition, <code>hda1</code> in which we store <code>/boot</code> (partition for <code>kernel</code> and <code>initrd</code>, as they cannot be on a LVM volume), and the rest is in a partition <code>hda2</code> which grows until the full size of the drive.</p><p>In <code>sda</code> we have the whole disk available for being used as LVM, so we will define a partition <code>sda1</code> for this use.</p><h3 id=creation-of-physical-volumes-pv>Creation of physical volumes (PV)<a hidden class=anchor aria-hidden=true href=#creation-of-physical-volumes-pv>#</a></h3><p>Physical volumes are the places in which we put the structure for volume groups, it&rsquo;s creation is as easy as running:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>pvcreate /dev/hda2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>pvcreate /dev/sda1
</span></span></code></pre></div><p>If we execute <code>pvscan</code>, we can check the listing of physical volumes defined on the system, as well as the kind of metadata (lvm or lvm2) and it&rsquo;s size, and a briefing on total, used and available.</p><p>For having a detailed state, we can execute <code>pvdisplay</code>, which will show more information like size, <code>PE's</code> available, etc.</p><h3 id=creation-of-volume-groups-vg>Creation of volume groups (VG)<a hidden class=anchor aria-hidden=true href=#creation-of-volume-groups-vg>#</a></h3><p>Volume groups are like drawers, which placed over physical volumes, that define the grouping for logical volumes, making more clear the structure.</p><p>For creating the volume group we will execute:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>vgcreate Prueba /dev/sda1
</span></span></code></pre></div><p>This command will create a volume group named <code>Prueba</code> over the physical volume at <code>/dev/sda1</code></p><p>For checking that the action went ok, was we can execute <code>vgscan</code> for getting a listing of defined volume groups.</p><h3 id=creation-of-logical-volumes-lv>Creation of Logical volumes (LV)<a hidden class=anchor aria-hidden=true href=#creation-of-logical-volumes-lv>#</a></h3><p>Logical volumes are the equivalent to partitions, is the place over which we will put a filesystem and thus, the data we want to store.</p><p>Logical volumes are defined inside a volume group in the following way:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>lvcreate Prueba -n Inicial -L 2G
</span></span></code></pre></div><p>If we execute <code>lvscan</code>, we will have a listing of all the defined volume groups and it&rsquo;s size and between them, <code>Inicial</code>, inside of <code>Prueba</code> and with a 2Gb size</p><h3 id=creation-of-a-filesystem>Creation of a filesystem<a hidden class=anchor aria-hidden=true href=#creation-of-a-filesystem>#</a></h3><p>Before using the logical volume we&rsquo;ll need to prepare it for data, and creating a filesystem, this time, the command is identical to the one we use over a physical disk, but specifying the logical volume, for example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>mkfs.ext3 /dev/Prueba/Inicial
</span></span></code></pre></div><p>It&rsquo;s advisable to make use of a filesystem we can resize, as, one the improvements of LVM is the ability to resize logical units and, requires, as consequence that the filesystem works as a &ldquo;container&rdquo; able to grow or shrink the same way.</p><p>Now, we can mount the filesystem:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>mount /dev/Prueba/Inicial /mnt
</span></span></code></pre></div><h3 id=resizing-an-lvm-drive>Resizing an LVM &ldquo;drive&rdquo;<a hidden class=anchor aria-hidden=true href=#resizing-an-lvm-drive>#</a></h3><p>EXT3, allows resizing of volumes, so they can grow while being used, but for reducing size we need to stop its usage, and even in that case, it allows the interesting opportunity to create small filesystems, fitted for our initial usage and then keep them growing based on our needs without stop running.</p><p>As an example, we&rsquo;re going to extend our <code>Inicial</code> filesystem, increasing it in 250Mb, we&rsquo;ll execute:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>pvscan <span style=color:#75715e>#(where we will be told about physical volumes and free space)</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#  In case of need, we can extend our volume group with:</span>
</span></span><span style=display:flex><span>pvcreate /dev/disconuevo
</span></span><span style=display:flex><span>vgextend Prueba /dev/disconuevo
</span></span><span style=display:flex><span><span style=color:#75715e>#  From now on, the vg will have the space ready for being used by lv and we will make it grow doing:</span>
</span></span><span style=display:flex><span>lvextend -L +250M /dev/Prueba/Inicial
</span></span><span style=display:flex><span>ext2online /dev/mapper/Prueba-Inicial
</span></span></code></pre></div><p>After it finishes, the filesystem at <code>/mnt</code> will have an extra 250Mb available.</p><p>We can make the filesystem grow to a total size, for example, make it grow until 4Gb, to do so, we will do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>lvextend -L 4G /dev/Prueba/Inicial
</span></span><span style=display:flex><span>ext2online /dev/mapper/Prueba-Inicial
</span></span></code></pre></div><p>Starting in Fedora Core 6 (FC6), the utility ext2online doesn&rsquo;t exist, as it has been integrated in resize2fs, so we will execute instead: <code>resize2fs -p /dev/Prueba-Inicial [final size]</code>.</p><p>ATTENTION: <strong>This is a dangerous step, we can lose data</strong></p><p>If we want to reduce the size of a logical volume, first, we&rsquo;ll need to know how much space is used by the filesystem and then, <code>umount</code> it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>umount /dev/mapper/Prueba-Inicial
</span></span><span style=display:flex><span><span style=color:#75715e>#Next step would be reduce the filesystem:</span>
</span></span><span style=display:flex><span>resize2fs /dev/mapper/Prueba-Inicial <span style=color:#f92672>[</span>new size<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>I&rsquo;m recommending reduce the filesystem under the final size we want to achieve, so we have a security margin. This size must ALWAYS be higher that the usage<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> of the volume.</p><p>When the process has ended, we can reduce the volume running:</p><p><code>lvextend -L -2G /dev/mapper/Prueba-Inicial</code></p><p>And now we will make the filesystem grow to regain the &ldquo;security margin&rdquo; we left with: <code>resize2fs /dev/mapper/Prueba-Inicial</code>.</p><h3 id=graphical-tool>Graphical tool<a hidden class=anchor aria-hidden=true href=#graphical-tool>#</a></h3><p>Red Hat or Fedora have a graphical tool <code>system-config-lvm</code> which allows to manage logical volumes in our system in the following way.</p><p>In the next screenshot we can see the physical volumes no assigned to a volume group, and with the options provided by the tool, we can add to an existing volume group or well, create a new volume group:</p><p><img alt="Unassigned PV" loading=lazy src=../../../../../blog/2008/04/20/logical-volume-manager-lvm/lvm3.jpg></p><p>Here we can create a new logical volume inside the volume group, we can specify the volume name, the kind of volume as well as size and filesystem:</p><p><img alt="Create LV" loading=lazy src=../../../../../blog/2008/04/20/logical-volume-manager-lvm/lvm6.jpg></p><p>Here we can see the volume group &ldquo;Test&rdquo; and the logical and physical view created (as we see, Test is made of four physical volumes: sdb1,sdb2,sdb3,sdb4)</p><p><img alt="LV view" loading=lazy src=../../../../../blog/2008/04/20/logical-volume-manager-lvm/lvm8.jpg></p><p>When we select the free space of the logical volume, the following is shown: number of extents, physical location for each physical volume.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Physical Extents&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Multiple Devices: is a software technology that allows creation of several disk grouping levels: <code>linear</code>, <code>raid0</code>, <code>raid1</code>, <code>raid5</code>. Devices will identify themselves to the system as <code>/dev/md*0,1,2,3,etc*</code>, and it&rsquo;s status (defined <code>md's</code>, sync status, etc) in the file <code>/proc/mdstat</code>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>The one that we wrote down in the first step, before it was unmounted.<p>Enjoy! (and if you do, you can
<a href=https://ko-fi.com/I2I4KDA0V target=_blank><img src=https://storage.ko-fi.com/cdn/brandasset/kofi_s_logo_nolabel.png height=36 style=border:0;height:36px;vertical-align:middle;display:inline-block border=0>
</img>
Buy Me a Coffee
</a>)</p>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://iranzo.io/tags/linux/>Linux</a></li><li><a href=https://iranzo.io/tags/lvm/>LVM</a></li><li><a href=https://iranzo.io/tags/foss/>FOSS</a></li><li><a href=https://iranzo.io/tags/logical-volumes/>Logical Volumes</a></li></ul><nav class=paginav><a class=prev href=https://iranzo.io/blog/2008/07/18/mount-disk-images/><span class=title>« Prev</span><br><span>Mount disk images</span>
</a><a class=next href=https://iranzo.io/blog/2008/01/04/security-enhanced-linux-selinux/><span class=title>Next »</span><br><span>Security Enhanced Linux (SELinux)</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Logical volume manager (LVM) on x" href="https://x.com/intent/tweet/?text=Logical%20volume%20manager%20%28LVM%29&amp;url=https%3a%2f%2firanzo.io%2fblog%2f2008%2f04%2f20%2flogical-volume-manager-lvm%2f&amp;hashtags=Linux%2cLVM%2cFOSS%2clogicalvolumes"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logical volume manager (LVM) on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2firanzo.io%2fblog%2f2008%2f04%2f20%2flogical-volume-manager-lvm%2f&amp;title=Logical%20volume%20manager%20%28LVM%29&amp;summary=Logical%20volume%20manager%20%28LVM%29&amp;source=https%3a%2f%2firanzo.io%2fblog%2f2008%2f04%2f20%2flogical-volume-manager-lvm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logical volume manager (LVM) on reddit" href="https://reddit.com/submit?url=https%3a%2f%2firanzo.io%2fblog%2f2008%2f04%2f20%2flogical-volume-manager-lvm%2f&title=Logical%20volume%20manager%20%28LVM%29"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logical volume manager (LVM) on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2firanzo.io%2fblog%2f2008%2f04%2f20%2flogical-volume-manager-lvm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logical volume manager (LVM) on whatsapp" href="https://api.whatsapp.com/send?text=Logical%20volume%20manager%20%28LVM%29%20-%20https%3a%2f%2firanzo.io%2fblog%2f2008%2f04%2f20%2flogical-volume-manager-lvm%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logical volume manager (LVM) on telegram" href="https://telegram.me/share/url?text=Logical%20volume%20manager%20%28LVM%29&amp;url=https%3a%2f%2firanzo.io%2fblog%2f2008%2f04%2f20%2flogical-volume-manager-lvm%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Logical volume manager (LVM) on ycombinator" href="https://news.ycombinator.com/submitlink?t=Logical%20volume%20manager%20%28LVM%29&u=https%3a%2f%2firanzo.io%2fblog%2f2008%2f04%2f20%2flogical-volume-manager-lvm%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://iranzo.io/>Pablo Iranzo Gómez blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><center><small>This blog is a participant in the Amazon Associate Program, an affiliate advertising program designed to provide a means for sites to earn advertising fees by advertising and linking to Amazon.</small></center><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>