<!doctype html><html lang=en><head><meta charset=utf-8><title>DevConf.cz 2018: Citellus - Detecting common pitfalls of deployments</title><meta name=description content="A bunch of unrelated data"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><link rel=stylesheet href=../../../../reveal-js/dist/reset.css><link rel=stylesheet href=../../../../reveal-js/dist/reveal.css><link rel=stylesheet href=../../../../reveal-js/dist/theme/solarized.css id=theme><link rel=stylesheet href=../../../../highlight-js/default.min.css></head><body><div class=reveal><div class=slides><section><h2 id=citellus><a href=https://github.com/citellusorg/citellus>Citellus</a>:</h2><h3 id=detecting-common-pitfalls-of-deployments>Detecting common pitfalls of deployments</h3><p><img loading=lazy src=citellus.png></p><p><a href=https://github.com/citellusorg/citellus>https://github.com/citellusorg/citellus</a></p><p>Recording at <a href="https://www.youtube.com/watch?v=SDzzqrUdn5A">https://www.youtube.com/watch?v=SDzzqrUdn5A</a></p></section><section><h2 id=what-is-citellus>What is Citellus?</h2><ul><li>Citellus is a framework populated by community-contributed scripts that automate detecting problems, including configuration issues, conflicts with package versions, and more.</li></ul></section><section><h2 id=history-how-did-was-it-started>History: how did was it started?</h2><ul><li><p>The tool, started by Robin ƒåern√≠n after a long weekend shift checking one and over again several sosreports for the same data on different hosts.</p></li><li><p>It started with some tests + shell wrapper, and was added a python wrapper by Pablo Iranzo to bring in more powerful features.</p></li><li><p>After some design discussions with Engineering, a simpler reporting and design of tests was implemented.</p></li></ul></section><section><h2 id=what-can-you-do-with-citellus>What can you do with Citellus?</h2><ul><li>Run against a sosreport or live environment.</li><li>Solve issues faster thanks to the information it provides.</li><li>Use the community-provided plugins for detecting actual or potential issues.</li><li>Code new plugins in your language of choice (bash, python, ruby, etc.) to extend functionality.<ul><li>Contribute them upstream for others to benefit.</li></ul></li><li>Use that information as part of proactive insights about the systems.</li></ul></section><section><h2 id=real-life-examples>Real life examples?</h2><ul><li>For example, with Citellus you can detect:<ul><li>Failed keystone token purges.</li><li>missing parameters in expired ceilometer data, which can lead to filling up your hard drive.</li><li>unsynced NTP.</li><li>outdated packages that have known critical issues.</li><li>others! (119 plugins as of this writing some of them with more than one issue detected)</li></ul></li><li>Whatever else you can imagine or code üòâ</li></ul></section><section><h2 id=some-numbers-on-plugin-count>Some numbers on plugin count:</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span>bugzilla : 15 [&#39;openstack/swift: 1&#39;, &#39;openstack/keystone/templates: 1&#39;, &#39;openstack/ceph: 1&#39;, &#39;httpd: 1&#39;, &#39;openstack/keystone: 1&#39;, &#39;openstack/ceilometer: 1&#39;, &#39;openstack/nova: 2&#39;, &#39;openstack/httpd: 1&#39;, &#39;systemd: 1&#39;, &#39;openstack/tripleo: 1&#39;, &#39;openstack/neutron: 4&#39;]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>launchpad : 1 [&#39;openstack/keystone: 1&#39;]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>network : 1 []
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>openstack : 54 [&#39;nova: 8&#39;, &#39;mysql: 6&#39;, &#39;rabbitmq: 3&#39;, &#39;containers/rabbitmq: 1&#39;, &#39;network: 3&#39;, &#39;glance: 1&#39;, &#39;containers/docker: 2&#39;, &#39;containers: 4&#39;, &#39;cinder: 1&#39;, &#39;hardware: 1&#39;, &#39;swift: 2&#39;, &#39;systemd: 1&#39;, &#39;iptables: 1&#39;, &#39;ceph: 4&#39;, &#39;keystone: 3&#39;, &#39;system: 1&#39;, &#39;redis: 1&#39;, &#39;neutron: 1&#39;, &#39;crontab: 3&#39;, &#39;ceilometer: 3&#39;]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>pacemaker : 7 []
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>security : 12 [&#39;meltdown: 2&#39;, &#39;spectre: 8&#39;]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>system : 28 []
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>virtualization : 1 []
</span></span></code></pre></div></section><section><h2 id=the-goal>The goal</h2><ul><li>Be so damn simple to write new plugins that anyone can do them.</li><li>Allow to write tests in whatever language of choice (bash, python, perl, etc) as long as they conform to some standards.</li><li>Allow anyone to submit new plugins.</li></ul></section><section><h2 id=how-to-run-it-manually>How to run it manually?</h2><p>![](citellusrun.png" height=&ldquo;20%&rdquo; border=0></p><p>Note: Change speaker after this</p></section><section><h2 id=highlights>Highlights</h2><ul><li>Plugins in your language of choice.</li><li>Allows to dump output to json file to be processed by other tools.<ul><li>Allow to visualize html from json output.</li></ul></li><li>Ansible playbook support (live and snapshoot if crafted playbooks)<ul><li>Core implemented as extension to easily expand with new ones.</li></ul></li><li>Save / restore default settings</li></ul></section><section><h2 id=html-interface>HTML Interface</h2><ul><li>Create by using &ndash;output and &ndash;web, open the generated <code>citellus.html</code> over http.
![](www.png" height=&ldquo;40%&rdquo; border=0></li></ul></section><section><h2 id=why-upstream>Why upstream?</h2><ul><li>This is an open source project. All the scripts should be committed upstream and shared (and we are willing to foster this)<ul><li>Project on GitHub: <a href=https://github.com/citellusorg/citellus/>https://github.com/citellusorg/citellus/</a></li></ul></li><li>We want contributions to happen from anyone.</li><li>We follow an approach similar to other OpenSource projects: we do use Gerrit for reviewing the code and UT&rsquo;s for validating basic functionality.</li></ul></section><section><h2 id=how-do-i-contribute>How do I contribute?</h2><p>At the moment, there‚Äôs a strong presence on OpenStack plugins as it is where we solve our issues on everyday basis, but allows anything, as long as there are tests written for it.</p><p>For example, it will be easy to report on systems registered against RHN instead of CDN or systems with a specific version of pacemaker known to have lot of issues or check amount of free memory or memory usage from a process.</p><p>Read contributing doc at: <a href=https://github.com/citellusorg/citellus/blob/master/CONTRIBUTING.md>https://github.com/citellusorg/citellus/blob/master/CONTRIBUTING.md</a> for more details.</p></section><section><h2 id=citellus-vs-other-tools>Citellus vs other tools</h2><ul><li><p>XSOS: Provides information on ram usage, etc, no analysis, more like a ‚Äòfancy‚Äô sosreport viewer.</p></li><li><p>TripleO-validations: only runs live from the environment, for customer support most of times we cannot afford to do that.</p></li></ul></section><section><h2 id=why-not-sosreports>Why not sosreports?</h2><ul><li>It‚Äôs not Citellus or ‚Äòsosreports‚Äô, SOS collects data from the system, Citellus, runs tests/plugins against the data collected.</li><li>Sosreport is installed in RHEL base channels, this makes it well spread, but also, slower to get changes.</li><li>Frequently, data about errors or errors to be, is already in sosreports.</li><li>Citellus is based on known issues and easy to extend with new ones, requires faster devel cycle, targeting more a DEVOPS or support teams as target audience.</li></ul><p>Note: Change speaker after this</p></section><section><h2 id=how-does-it-work-under-the-hood>How does it work under the hood?</h2><p>Philosophy is very simple:</p><ul><li>Citellus is just a simple wrapper.</li><li>Allows to specify on sosreport and test folders</li><li>Finds tests available in test folders</li><li>Executes each test against sosreport and reports return status</li><li>Framework written in python which features option parsing, parallel execution of tests, filtering, etc.</li></ul></section><section><h2 id=what-about-the-plugins>What about the plugins?</h2><p>Tests are even simpler:</p><ul><li>Written in whatever language of choice as long as they can be executed from shell.</li><li>Output messages to ‚Äòstderr‚Äô (>&amp;2)</li><li>When using strings like echo $‚Äùstring‚Äù bash‚Äôs built-in i18n is used so you can translate in your language.</li><li>Return <code>$RC_OKAY</code> for success / <code>$RC_FAILED</code> for error / <code>$RC_SKIPPED</code> for skipped tests / Other for unexpected error</li></ul></section><section><h2 id=what-about-the-plugins-continuation>What about the plugins? (continuation)</h2><ul><li>Will inherit some env vars like root folder for sosreport (empty for live) (<code>CITELLUS_ROOT</code>) or if running live (<code>CITELLUS_LIVE</code>) that provide required details. No user input should be required.</li><li>Live tests can for example query DB and ones in sosreport check values on logs</li></ul></section><section><h2 id=some-execution-and-script-examples>Some execution and script examples?</h2><p>Check <a href=https://github.com/citellusorg/citellus/blob/master/citellus/plugins/system/disk_usage.sh>disk usage</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># Load common functions</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CITELLUS_BASE<span style=color:#e6db74>}</span><span style=color:#e6db74>/common-functions.sh&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> . <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CITELLUS_BASE<span style=color:#e6db74>}</span><span style=color:#e6db74>/common-functions.sh&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># description: error if disk usage is greater than $CITELLUS_DISK_MAX_PERCENT</span>
</span></span><span style=display:flex><span>: <span style=color:#e6db74>${</span>CITELLUS_DISK_MAX_PERCENT=75<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $CITELLUS_LIVE <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    is_required_file <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CITELLUS_ROOT<span style=color:#e6db74>}</span><span style=color:#e6db74>/df&#34;</span>
</span></span><span style=display:flex><span>    DISK_USE_CMD<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;cat </span><span style=color:#e6db74>${</span>CITELLUS_ROOT<span style=color:#e6db74>}</span><span style=color:#e6db74>/df&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    DISK_USE_CMD<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;df -P&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>result<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>$DISK_USE_CMD |awk -vdisk_max_percent<span style=color:#f92672>=</span>$CITELLUS_DISK_MAX_PERCENT <span style=color:#e6db74>&#39;/^\/dev/ &amp;&amp; substr($5, 0, length($5)-1) &gt; disk_max_percent { print $6,$5 }&#39;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> -n <span style=color:#e6db74>&#34;</span>$result<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>result<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> &gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    exit $RC_FAILED
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    exit $RC_OKAY
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div></section><section><h2 id=ready-for-deep-dive-on-tests>Ready for deep dive on tests?</h2><ul><li><p>There are more tests for OpenStack at the moment as this is the speciality where it started, but it‚Äôs open and able to extend to whatever is needed.</p></li><li><p>Each test should take care of checking if it should run or not and output return code and stderr. Wrapper just runs all the tests or specific ones (filtering options)</p></li></ul></section><section><h2 id=how-to-start-a-new-plugin-example>How to start a new plugin (example)</h2><ul><li>Write a script in <code>~/~/.../plugins/core/rhev/hosted-engine.sh</code></li><li><code>chmod +x hosted-engine.sh</code></li></ul></section><section><h2 id=requirements>Requirements:</h2><ul><li>return code must be <code>$RC_OKAY</code> (ok), <code>$RC_FAILED</code> (failed) or <code>$RC_SKIPPED</code> (skipped)</li><li>Messages to be printed on stderr are displayed on failed or ‚Äòskipped‚Äô if verbose enabled</li><li>Running against ‚Äòsosreport‚Äô, CITELLUS_ROOT contains path to sosreport folder provided.</li><li>CITELLUS_LIVE contains 0 or 1 if running against live or not</li></ul></section><section><h2 id=how-to-start-a-new-plugin-continuation>How to start a new plugin (continuation)</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ‚Äú$CITELLUS_LIVE‚Äù <span style=color:#f92672>=</span> ‚Äú0‚Äù <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    grep -q ovirt-hosted-engine-ha $CITELLUS_ROOT/installed-rpms
</span></span><span style=display:flex><span>    returncode<span style=color:#f92672>=</span>$?
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> ‚Äúx$returncode‚Äù <span style=color:#f92672>==</span> ‚Äúx0‚Äù <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>        exit $RC_OKAY
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>        echo ‚Äúovirt-hosted-engine is not installed ‚Äú &gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        exit $RC_FAILED
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    echo ‚ÄúNot running on Live system‚Äù &gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    exit $RC_SKIPPED
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div></section><section><h2 id=how-to-start-a-new-plugin-with-functions>How to start a new plugin (with functions)</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#75715e># Load common functions</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span> -f <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CITELLUS_BASE<span style=color:#e6db74>}</span><span style=color:#e6db74>/common-functions.sh&#34;</span> <span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> . <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>CITELLUS_BASE<span style=color:#e6db74>}</span><span style=color:#e6db74>/common-functions.sh&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> is_rpm ovirt-hosted-engine-ha; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    exit $RC_OKAY
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    echo ‚Äúovirt-hosted-engine is not installed ‚Äú &gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    exit $RC_FAILED
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div></section><section><h2 id=how-to-test-your-plugin>How to test your plugin?</h2><ul><li><p>Use <code>tox</code> to run some UT&rsquo;s (utf8, bashate, python 2.7, python 3.5)</p></li><li><p>Specify the plugin to use:</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#f92672>[</span>piranzo@host citellus<span style=color:#f92672>]</span>$ ~/citellus/citellus.py sosreport-20170724-175510/crta02 -i hosted-engine.sh
</span></span><span style=display:flex><span>_________ .__  __         .__  .__
</span></span><span style=display:flex><span><span style=color:#ae81ff>\_</span>   ___ <span style=color:#ae81ff>\|</span>__|/  |_  ____ |  | |  |  __ __  ______
</span></span><span style=display:flex><span>/    <span style=color:#ae81ff>\ </span> <span style=color:#ae81ff>\/</span>|  <span style=color:#ae81ff>\ </span>  __<span style=color:#ae81ff>\/</span> __ <span style=color:#ae81ff>\|</span>  | |  | |  |  <span style=color:#ae81ff>\/</span>  ___/
</span></span><span style=display:flex><span><span style=color:#ae81ff>\ </span>    <span style=color:#ae81ff>\_</span>__|  <span style=color:#f92672>||</span>  | <span style=color:#ae81ff>\ </span> ___/|  |_|  |_|  |  /<span style=color:#ae81ff>\_</span>__ <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span> <span style=color:#ae81ff>\_</span>_____  /__<span style=color:#f92672>||</span>__|  <span style=color:#ae81ff>\_</span>__  &gt;____/____/____//____  &gt;
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>\/</span>              <span style=color:#ae81ff>\/</span>                     <span style=color:#ae81ff>\/</span>
</span></span><span style=display:flex><span>mode: fs snapshot sosreport-20170724-175510/crta02
</span></span><span style=display:flex><span><span style=color:#75715e># ~/~/.../plugins/core/rhev/hosted-engine.sh: failed</span>
</span></span><span style=display:flex><span>    ‚Äúovirt-hosted-engine is not installed ‚Äú
</span></span></code></pre></div></section><section><h2 id=what-is-magui>What is Magui</h2><h3 id=introduction>Introduction</h3><ul><li>Citellus works on individual sosreports against a set of tests (all by default), but some problems require checks across several systems.</li></ul><p>For example, Galera requires to check <code>seqno</code> across all controllers running database.</p></section><section><h3 id=what-does-magui-does>What does M.a.g.u.i. Does?</h3><ul><li>It runs citellus against each sosreport, gathers and groups the data per plugin.</li><li>Runs its own plugins against the data received to highlight issues that depend on several systems</li><li>Allows to grab remote host data via ansible host lists</li></ul></section><section><h2 id=how-does-it-looks-like>How does it looks like?</h2><p>It‚Äôs delivered in citellus repo and can be executed by specifying sosreports:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=nohighlight data-noescape><span style=display:flex><span><span style=color:#f92672>[</span>piranzo@collab-shell<span style=color:#f92672>]</span>$ ~/citellus/magui.py * -i seqno
</span></span><span style=display:flex><span>    _
</span></span><span style=display:flex><span>  _<span style=color:#f92672>(</span> <span style=color:#f92672>)</span>_  Magui:
</span></span><span style=display:flex><span> <span style=color:#f92672>(</span>_<span style=color:#f92672>(</span>√∏<span style=color:#f92672>)</span>_<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  /<span style=color:#f92672>(</span>_<span style=color:#f92672>)</span>   Multiple Analisis Generic Unifier and Interpreter
</span></span><span style=display:flex><span> <span style=color:#ae81ff>\|</span>
</span></span><span style=display:flex><span>  |/
</span></span><span style=display:flex><span><span style=color:#f92672>{</span><span style=color:#e6db74>&#39;~/~/.../plugins/core/openstack/mysql/seqno.sh&#39;</span>: <span style=color:#f92672>{</span><span style=color:#e6db74>&#39;controller0&#39;</span>: <span style=color:#f92672>{</span><span style=color:#e6db74>&#39;err&#39;</span>: u<span style=color:#e6db74>&#39;2b65adb0-787e-11e7-81a8-26480628c14c:285019879\n&#39;</span>,
</span></span><span style=display:flex><span>                                                                                                                          <span style=color:#e6db74>&#39;out&#39;</span>: u<span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                                                                                                                          <span style=color:#e6db74>&#39;rc&#39;</span>: 10<span style=color:#f92672>}</span>,
</span></span><span style=display:flex><span>                                                                                        <span style=color:#e6db74>&#39;controller1&#39;</span>: <span style=color:#f92672>{</span><span style=color:#e6db74>&#39;err&#39;</span>: u<span style=color:#e6db74>&#39;2b65adb0-787e-11e7-81a8-26480628c14c:285019879\n&#39;</span>,
</span></span><span style=display:flex><span>                                                                                                                          <span style=color:#e6db74>&#39;out&#39;</span>: u<span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                                                                                                                          <span style=color:#e6db74>&#39;rc&#39;</span>: 10<span style=color:#f92672>}</span>,
</span></span><span style=display:flex><span>                                                                                        <span style=color:#e6db74>&#39;controller2&#39;</span>: <span style=color:#f92672>{</span><span style=color:#e6db74>&#39;err&#39;</span>: u<span style=color:#e6db74>&#39;2b65adb0-787e-11e7-81a8-26480628c14c:285019878\n&#39;</span>,
</span></span><span style=display:flex><span>                                                                                                                          <span style=color:#e6db74>&#39;out&#39;</span>: u<span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                                                                                                                          <span style=color:#e6db74>&#39;rc&#39;</span>: 10<span style=color:#f92672>}}}</span>
</span></span></code></pre></div><ul><li>On this example, UUID and SEQNO is shown for each controller and we can see that controller 2 has different SEQNO to the other two nodes.</li></ul></section><section><h2 id=next-steps-with-magui>Next steps with Magui</h2><ul><li>Plugins as of this writing:<ul><li>Aggregate data from citellus sorted by plugin for quick comparison</li><li>Show &lsquo;metadata&rsquo; extension separated to quickly compare across values</li><li>pipeline-yaml different across sosreports</li><li><code>seqno</code> and highest <code>seqno</code> in Galera</li><li>release check across hosts</li></ul></li></ul></section><section><h2 id=action-items>Action Items</h2><ul><li>Add more plugins!</li><li>Evangelize about the tool so we can work together in solving our common issues on the same framework.</li><li>Get moving fast enough that the tool has continuity, other tools just died by having a ‚Äòsolo‚Äô developer working on spare time</li><li>Start implementing more tests in Magui that provide real intelligence (for example we do report and check on <code>seqno</code> or pipeline-yaml but lot of other issues can benefit from this).</li></ul></section><section><h2 id=are-you-still-there>Are you still there?</h2><p>THANK YOU FOR ATTENDING!!</p><h3 id=questions>Questions?</h3><p>For additional questions, come to #citellus on Freenode or email us:</p><ul><li>&lt;mailto:citellus <em>AT</em> googlegroups.com.com></li><li><a href=https://groups.google.com/forum/#!forum/citellus>https://groups.google.com/forum/#!forum/citellus</a></li></ul></section><section><h2 id=other-resources>Other resources</h2><p>Blog posts:</p><ul><li><p><a href=../../../../tags/citellus/>Citellus tagged posts</a></p></li><li><p><a href=../../../../blog/2017/07/26/citellus-framework-for-detecting-known-issues-in-systems./>Citellus Framework for detecting known issues</a></p></li><li><p><a href=../../../../blog/2017/07/31/magui-for-analysis-of-issues-across-several-hosts./>Magui for analysis of issues across several hosts</a></p></li><li><p><a href=../../../../blog/2017/08/17/jenkins-for-running-ci-tests/>Jenkins for running CI tests</a></p></li><li><p><a href=../../../../blog/2017/10/26/i18n-and-bash8-in-bash/>i18n and bash</a></p></li><li><p><a href=../../../../blog/2018/01/16/recent-changes-in-magui-and-citellus/>Recent changes in Magui and Citellus</a></p></li><li><p><a href="https://www.youtube.com/watch?v=SDzzqrUdn5A">DevConf.cz 2018 recording</a></p></li><li><p>DevConf.cz 2018 <a href=https://devconfcz2018.sched.com/event/DJXG/detect-pitfalls-of-osp-deployments-with-citellus>https://devconfcz2018.sched.com/event/DJXG/detect-pitfalls-of-osp-deployments-with-citellus</a></p></li></ul></section></div></div><script type=text/javascript src=../../../../reveal-hugo/object-assign.js></script><script src=../../../../reveal-js/dist/reveal.js></script><script type=text/javascript src=../../../../reveal-js/plugin/markdown/markdown.js></script><script type=text/javascript src=../../../../reveal-js/plugin/highlight/highlight.js></script><script type=text/javascript src=../../../../reveal-js/plugin/zoom/zoom.js></script><script type=text/javascript src=../../../../reveal-js/plugin/notes/notes.js></script><script type=text/javascript>function camelize(e){return e&&Object.keys(e).forEach(function(t){newK=t.replace(/(_\w)/g,function(e){return e[1].toUpperCase()}),newK!=t&&(e[newK]=e[t],delete e[t])}),e}var revealHugoDefaults={center:!0,controls:!0,history:!0,progress:!0,transition:"slide"},revealHugoSiteParams={},revealHugoPageParams={},revealHugoPlugins={plugins:[RevealMarkdown,RevealHighlight,RevealZoom,RevealNotes]},options=Object.assign({},camelize(revealHugoDefaults),camelize(revealHugoSiteParams),camelize(revealHugoPageParams),camelize(revealHugoPlugins));Reveal.initialize(options)</script></body></html>